# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Render.com –¥–ª—è HR –±–æ—Ç–∞ –ú–µ—á–µ–ª
# –í–µ—Ä—Å–∏—è 9.3.5 - –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–ò–ù–¢–ê–ö–°–ò–°–ê –ò –í–ï–†–°–ò–ò PYTHON

services:
  - type: web
    name: hr-bot-mechel
    env: python
    pythonVersion: "3.11.9"
    region: frankfurt
    plan: free
    branch: main
    buildCommand: |
      echo "üîß –ù–∞—á–∞–ª–æ —Å–±–æ—Ä–∫–∏. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Python:"
      python --version
      python -c "import sys; print(f'–ü—É—Ç—å –∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É: {sys.executable}')"
      pip install -r requirements.txt
      echo "‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
    startCommand: gunicorn --config gunicorn.conf.py bot:app
    healthCheckPath: /health
    healthCheckTimeout: 30
    healthCheckInterval: 60
    autoDeploy: true
    envVars:
      - key: TELEGRAM_BOT_TOKEN
        sync: false
        required: true
        description: "–¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather"
      - key: PORT
        value: "10000"
        description: "–ü–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
      - key: AUTO_SET_WEBHOOK
        value: "true"
        description: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ"
      - key: DELETE_WEBHOOK_ON_EXIT
        value: "false"
        description: "–£–¥–∞–ª—è—Ç—å –≤–µ–±—Ö—É–∫ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏"
      - key: DATA_DIR
        value: "data"
        description: "–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏"
      - key: FAQ_FILE
        value: "faq.csv"
        description: "–§–∞–π–ª FAQ –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV"
      - key: CONTENT_FILE
        value: "–∫–æ–Ω—Ç–µ–Ω—Ç.xlsx"
        description: "–§–∞–π–ª —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º"
      - key: LOG_LEVEL
        value: "INFO"
        description: "–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è"
      - key: GUNICORN_LOG_LEVEL
        value: "info"
        description: "–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Gunicorn"
    headers:
      - path: /*
        name: X-Content-Type-Options
        value: nosniff
      - path: /*
        name: X-Frame-Options
        value: DENY
      - path: /*
        name: X-XSS-Protection
        value: "1; mode=block"
      - path: /*
        name: Strict-Transport-Security
        value: "max-age=31536000; includeSubDomains"
