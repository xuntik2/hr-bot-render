# –£–ü–†–û–©–ï–ù–ù–ê–Ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Render.com –¥–ª—è HR –±–æ—Ç–∞ –ú–µ—á–µ–ª
# –í–µ—Ä—Å–∏—è –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞ (Free)

services:
  - type: web
    name: hr-bot-mechel
    env: python
    region: frankfurt
    plan: free
    branch: main
    pythonVersion: "3.11.9"  # ‚úÖ –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
    
    # –°–ë–û–†–ö–ê –ò –ó–ê–ü–£–°–ö
    buildCommand: |
      echo "üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–µ–¥—ã —Å–±–æ—Ä–∫–∏..."
      python --version
      pip install --upgrade pip
      pip install -r requirements.txt
      echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
    startCommand: gunicorn --config gunicorn.conf.py bot:app
    
    # HEALTH CHECK
    healthCheckPath: /health
    healthCheckTimeout: 30
    healthCheckInterval: 60
    
    # –ê–í–¢–û–î–ï–ü–õ–û–ô
    autoDeploy: true
    
    # –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø
    envVars:
      - key: TELEGRAM_BOT_TOKEN
        sync: false
        required: true
        description: "–¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather"
      
      - key: PORT
        value: "10000"
        description: "–ü–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
      
      - key: AUTO_SET_WEBHOOK
        value: "true"
        description: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ"
      
      - key: DELETE_WEBHOOK_ON_EXIT
        value: "false"
        description: "–£–¥–∞–ª—è—Ç—å –≤–µ–±—Ö—É–∫ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)"
      
      - key: DATA_DIR
        value: "data"
        description: "–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏"
      
      - key: FAQ_FILE
        value: "faq.csv"
        description: "–§–∞–π–ª FAQ –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV"
      
      - key: CONTENT_FILE
        value: "–∫–æ–Ω—Ç–µ–Ω—Ç.xlsx"
        description: "–§–∞–π–ª —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º"
      
      - key: LOG_LEVEL
        value: "INFO"
        description: "–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è"
      
      - key: GUNICORN_LOG_LEVEL
        value: "info"
        description: "–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Gunicorn"
    
    # –ó–ê–ì–û–õ–û–í–ö–ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò
    headers:
      - path: /*
        name: X-Content-Type-Options
        value: nosniff
      
      - path: /*
        name: X-Frame-Options
        value: DENY
      
      - path: /*
        name: X-XSS-Protection
        value: "1; mode=block"
      
      - path: /*
        name: Strict-Transport-Security
        value: "max-age=31536000; includeSubDomains"
